#Gitについて

gitはバージョン管理システムで、効率良くプロジェクトの管理をできる様になっていてファイルの追加、変更、削除を監視する事ができて
いつでも前のバージョンに戻したりする事ができたり、ソースコードを共有する事ができる。

## Gitの仕組み(ローカルリポジトリ)
Gitには大きく分けて二つのリポジトリがある。  
リポジトリとは、ソースコードをGitが管理する場所の事である。  
ローカルリポジトリは下記のコマンドを打つ事で作成する事ができる。
```
git init
```

と呼ばれるコマンドで作成できこのコマンドを打つと、.gitと言う隠しディレクトリができる。
この中にはいろいろな設定ファイルなどが入っているが、今回はこのファイルの正体がローカルリポジトリと言う事で
割愛する。

##Gitの構造
Gitのローカルリポジトリは3つの階層に分かれていて
1. ワーキングツリー
2. ステージング
3. ローカルリポジトリ

## git add と git reset HEAD
```
git add ステージングしたいファイル
```

上記のコマンドを打つ事でファイルの変更をステージングする事ができる。
これでcommitを打つ為の準備段階ができる。

また逆にステージングした情報を取り消したい場合は下記のコマンドを使用する。
```
git reset HEAD 戻したいファイル
```
HEADと言うのは
現在の最新のcommitの場所を指していて、ステージングファイルはまだcommitされていないので最新のcommitであるHEADには反映されていない
なので、このコマンドで最新のcommitをコピーする事で、ステージングの情報を元に戻す事ができる。

## git commit --amend

このコマンドは最新のcommitを取り消す事ができるコマンドで
コミットを打ってしまったがそのコミットを無かった事にしたいと言う場合に使用する。  

```
git commit --amend ファイル名
```

またgitはファイルの追加をする時はgit addをしようすれば良いが、削除と移動の時は違うコマンドを使用する必要がある。

## git rm

このコマンドはファイルを削除する時の為のコマンドで、下記の様な種類がある。
```
git rm ファイル名
git rm -r ディレクトリ名
git rm --cached
```

1番上のコマンドは、ファイルをローカルリポジトリからもワーキングツリーからも消す
2番目のコマンドは、対象がディレクトリの場合に使用する。
最後のコマンドは、リポジトリからは消したいがワーキングツリーには残しておきたい場合に使用する。

## git mv
ファイルの場所が移動した場合は下記の様にしてコマンドを打つ
```
git mv 変更前のファイル場所 新しいファイル場所
```

このコマンドを打つ事で、ファイルの移動を記録する事ができる。
同じディレクトリの中で指定すると、ファイル名変更になる。
違うディレクトリを指定すると、ファイルの移動になる。

```
mv 変更前のファイル場所 新しいファイル場所
git rm 変更前のファイル (移動前の追跡を解除する)
git add 新しいファイル (移動後の追跡を開始する)
```
と一緒の事をgit mvで行っている。


## ブランチとは
ブランチとは、並行して複数機能を開発する際に便利な機能。
ブランチは分岐をして、変更を反映させる事ができる。

ブランチは下記のコマンドで作る

```
git branch ブランチ名 
```
で作成できる。
移動まではしてくれないので
```
git checkout ブランチ名
```
で作成したブランチに移動できる。

## ブランチの仕組み
ブランチ名はコミットを指し示すポインタの様な物で、そのポインタをcheckoutで切り替えているだけ
またHEADと言うのは現在自分がいるcommitを指し示しているだけで内容は

```
HEADの中身
ref: ブランチ名
```

となっている。またcommitの仕組みは

```
コミット1
tree ツリー1
author 大志郎
```
```
コミット2
tree ツリー2
author 大志郎
parrent 39gv
```
の様にコミットにはコミットナンバーと作成者(author)親コミット情報が入っている。
この情報をブランチを切り替えて履歴を管理している状態になる。

## マージについて

マージとは他のブランチや他人が作成したファイルを取り込むコマンドでマージには3種類ある。

1. fast forword merge
2. auto merge
3. conflict

この3つがある

### fast forword merge
一番シンプルな形でブランチを切って作業したが、追記した部分以外の履歴が全く同じ場合ただポインタを移動するだけで全ての履歴をカバーできるので
「早送りマージ」と呼ばれる。

### auto merge
一番オーソドックスなマージで、ブランチを切って各作業者が作業を進めて、それぞれが別の箇所の履歴を変更している場合に適応されるマージ
新しく両方の履歴を持ったコミットを作る事でできる。

### conflict
コンフリクトは同一ファイルの同一箇所に変更がされている場合に、gitがどちらの変更を優先したら良いかわからないと言う理由から起こる。
予防策としては

1. 同じファイルを編集しない
2. git pull を行う時にブランチ名をしっかり確認してから行う。

などがある。






